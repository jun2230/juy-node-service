<%# const name = require("ejs/ejs").name; #%>
const <%= name %>Service = require('../server/<%= name %>.service')

class <%= name %>Controller {

    async create(ctx) {

        const { name, pid } = ctx.request.body

        const result = await <%= name %>Service.create(name, pid)

        ctx.body = {
            code: 200,
            data: '添加成功'
        }

    }

    async query(ctx) {

        const result = await <%= name %>Service.query()

        ctx.body = {
            code: 200,
            data: result
        }
    }

    async list(ctx) {

        const { offset, size } = ctx.request.body

        const result = await <%= name %>Service.list(offset, size)

        ctx.body = {
            code: 200,
            data: result
        }
    }

    async update(ctx) {

        const { id } = ctx.params
        const { name, pid } = ctx.request.body

        const result = await <%= name %>Service.update(id, name, pid)

        ctx.body = {
            code: 200,
            data: '修改成功'
        }
    }

    async remove(ctx) {

        const { id } = ctx.params

        const result = await <%= name %>Service.remove(id)

        ctx.body = {
            code: 200,
            data: '删除成功'
        }

    }

}

module.exports = new <%= name %>Controller()
